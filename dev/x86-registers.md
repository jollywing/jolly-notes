---
title: x86通用寄存器
layout: post
---

## 八个通用寄存器 ##

EAX：累加寄存器，用于算术运算，比较，和存储函数的返回值。
EBX：是唯一一个没有特殊用途的寄存器，能作为额外的数据储存器。
ECX：计数寄存器，用于循环操作。注意，ECX的计数是从大到小的。
EDX: 数据寄存器，是EAX的延伸，辅助EAX完成复杂的计算，如乘法和除法。
ESI：和EDI一起，用于对数据的循环操作。存储源操作数的指针。
EDI：和ESI一起，用于对数据的循环操作。存储目标操作数的指针。
ESP和EBP：负责函数调用和栈的操作，当函数调用时，参数被压入栈内，函数的返回地址也被压入栈内。ESP指着栈顶，也就是函数的返回地址，EBP指着栈底部，也就是函数参数入栈前的位置。
EIP：总是指向CPU要执行的指令。

## 调试器的断点 ##

1. 软件断点：软件断点具体而言就是在 CPU 执行到特定位置的代码的时候使其暂停。我们使用调试器调试程序时设置的断点都是软件断点。设置断点处的操作码的第一个字节替换成CC，并把中断地址和操作码第一个字节存储在中断列表中。CC是3号中断的操作码，当调试器接收到3号中断时，就从中断列表中查询对应的记录，并把原操作码第一个字节写回到指令中。
2. 硬件断点：使用CPU的8个调试寄存器（DR0 - DR7）。DR0到DR3存储硬件断点地址。DR4、DR5保留。DR6是状态寄存器，说明被触发的调试事件的状态。DR7是硬件断点的开关寄存器，同时也存储了DR0到DR3硬件断点的类型。硬件断点用INT 1触发中断。INT 1用于硬件中断和 *步进执行指令*。硬件断点的限制在于：只能监控4个字节的内存数据。
3. 内存断点：把某个内存页设为保护页。当这个内存页被进程访问了，就暂停进程。从而可以观察程序对数据做了什么操作。
